# Plan: Contact requests list values and view modal completeness

## Description

Ensure the backoffice Contact Requests list shows the **Entity** and **Name** values from each contact request (not placeholders or "—" when data exists), and that the View-details modal shows **all** contact request fields in a professional, theme-consistent layout, including a clear **link to the attached PDF** for verification. Fix the View button `aria-label` when entity name is missing (e.g. "View details for undefined").

## User requirements (verbatim)

- **ENTITY:** After the label "ENTITY:" show the **Entity** value from contact requests.
- **Name:** Where it currently shows "—", show the **Name** value from the contact request. This applies to each new record in the contact request list, for every row.
- **Modal:** The modal opened by the View (eye) button must contain, **professionally formatted and consistent with the theme used**, **all fields** from each contact request, including a **link to the attached PDF** so it can be verified.

## Files and functions to change

### Frontend

| File | Change |
|------|--------|
| `frontend/src/components/backoffice/ContactRequestsTab.tsx` | (1) Ensure list row displays `entity_name` and `contact_name` for each request; use fallback only when value is missing (e.g. keep "—" for empty `contact_name`). (2) Fix View button `aria-label`: use a safe fallback when `entity_name` is undefined (e.g. `entity_name ?? contact_email ?? id ?? 'contact request'`) so it never shows "undefined". |
| `frontend/src/components/backoffice/ContactRequestViewModal.tsx` | (1) Show **all** fields from `ContactRequest` in a consistent order and layout: id, entity_name, contact_name, contact_email, position, request_type, status, nda_file_name (if any), submitter_ip, notes, created_at. (2) Use theme tokens only (navy, Typography, design system). (3) Present the NDA PDF as a clear **link** (e.g. "Link to attached PDF for verification") that triggers download and is visually identifiable as the verification document. (4) Optional: unify label language (all EN or all RO) and ensure DataRow/grouping is professional (e.g. grouped sections if needed). |

### Types and API

- **No backend or API changes** — admin already returns `entity_name`, `contact_name`, and all other fields; frontend types (`ContactRequest` in `frontend/src/types/backoffice.ts`, `ContactRequestResponse` in `frontend/src/types/index.ts`) already include these.
- **No new endpoints** — NDA download remains `GET /admin/contact-requests/{id}/nda`; modal continues to call `onDownloadNDA(requestId)` for the PDF.

## Data source

- Contact request list and modal use **real data** from the API / WebSocket (`getContactRequests`, `new_request` / `request_updated`). Mapping from `ContactRequestResponse` to backoffice `ContactRequest` is in `frontend/src/pages/BackofficeOnboardingPage.tsx` (lines ~78–90); ensure `entity_name` and `contact_name` are passed through (already are).

## Implementation notes

1. **List row:** Current code already uses `request.entity_name` and `request.contact_name || '—'`. If "—" or blank appears when data exists, verify API/WebSocket payload and mapping; otherwise only the `aria-label` fix is needed for the View button.
2. **Modal fields:** Align modal content with `ContactRequest` in `frontend/src/types/backoffice.ts`: id, entity_name, contact_email, contact_name, position, request_type, nda_file_name, submitter_ip, status, notes, created_at. Display each with a clear label; use `DataRow` or equivalent so empty optional fields can show "—" or be omitted per current pattern.
3. **PDF link:** Keep existing download behaviour; ensure the NDA block is explicitly titled/labeled as the link to the attached PDF for verification (e.g. "Attached PDF (for verification)" or "Link to attached PDF for verification") and uses theme styles.
4. **Theme:** Use only Tailwind design tokens (e.g. `bg-navy-*`, `text-navy-*`, `border-navy-*`, Typography variants) as per `.cursor/rules/niha-core.mdc` and `frontend/docs/DESIGN_SYSTEM.md`.

## References

- `app_truth.md` §8 — Backoffice routing, Contact/NDA requests, API shape.
- `frontend/src/types/backoffice.ts` — `ContactRequest` interface.
- `backend/app/api/v1/admin.py` — GET contact-requests response shape (entity_name, contact_name, etc.).
- `backend/app/models/models.py` — `ContactRequest` model fields.
